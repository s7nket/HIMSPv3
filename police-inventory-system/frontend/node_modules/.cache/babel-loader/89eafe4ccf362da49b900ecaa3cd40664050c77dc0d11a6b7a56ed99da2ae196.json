{"ast":null,"code":"import axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// Create axios instance with better configuration\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add response interceptor for better auth error handling\nlet isRefreshing = false;\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  var _config$method;\n  // Add auth token to requests if it exists\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Log request for debugging\n  console.log(`ðŸ”„ ${(_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase()} ${config.url}`);\n  return config;\n}, error => {\n  console.error('âŒ Request Error:', error);\n  return Promise.reject(error);\n});\n\n// Response interceptor with better error handling\napi.interceptors.response.use(response => {\n  var _response$config$meth;\n  console.log(`âœ… ${(_response$config$meth = response.config.method) === null || _response$config$meth === void 0 ? void 0 : _response$config$meth.toUpperCase()} ${response.config.url} - ${response.status}`);\n  return response;\n}, async error => {\n  var _originalRequest$meth;\n  const originalRequest = error.config;\n\n  // Handle network errors first\n  if (!error.response) {\n    console.error('âŒ Network Error:', error.message);\n    if (error.code === 'ECONNABORTED') {\n      toast.error('Request timeout. Please try again.');\n    } else if (error.message === 'Network Error') {\n      toast.error('Network error. Please check your connection and ensure the backend server is running on port 5000.');\n    } else {\n      toast.error('Unable to connect to server. Please check if the backend is running.');\n    }\n    return Promise.reject(error);\n  }\n  const {\n    status,\n    data\n  } = error.response;\n  console.error(`âŒ ${(_originalRequest$meth = originalRequest.method) === null || _originalRequest$meth === void 0 ? void 0 : _originalRequest$meth.toUpperCase()} ${originalRequest.url} - ${status}:`, (data === null || data === void 0 ? void 0 : data.message) || 'Unknown error');\n\n  // Handle different HTTP status codes\n  switch (status) {\n    case 401:\n      // Unauthorized - handle token expiration\n      if (!isRefreshing && !originalRequest._retry) {\n        console.log('ðŸ”„ Token expired, attempting to refresh...');\n\n        // Try to refresh the authentication\n        const token = localStorage.getItem('token');\n        if (token) {\n          originalRequest._retry = true;\n          try {\n            // Check if token is still valid by calling /auth/me\n            const response = await axios.get(`${process.env.REACT_APP_API_URL || 'http://localhost:5000/api'}/auth/me`, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            if (response.data.success) {\n              console.log('âœ… Token is still valid, retrying request');\n              return api(originalRequest);\n            }\n          } catch (refreshError) {\n            console.log('âŒ Token refresh failed');\n          }\n        }\n\n        // Token is invalid, clear session and redirect\n        console.log('ðŸ§¹ Clearing invalid session');\n        localStorage.removeItem('token');\n        delete api.defaults.headers.common['Authorization'];\n\n        // Dispatch custom event for AuthContext to handle\n        window.dispatchEvent(new CustomEvent('auth-error'));\n        toast.error('Session expired. Please login again.');\n      }\n      break;\n    case 403:\n      toast.error('Access denied. You do not have permission to perform this action.');\n      break;\n    case 404:\n      // Don't show toast for 404s on background requests\n      if (!originalRequest.url.includes('/dashboard')) {\n        toast.error('Resource not found.');\n      }\n      break;\n    case 422:\n      // Validation errors\n      if (data.errors && Array.isArray(data.errors)) {\n        data.errors.forEach(err => toast.error(err.msg || err.message));\n      } else {\n        toast.error(data.message || 'Validation error occurred.');\n      }\n      break;\n    case 429:\n      toast.error('Too many requests. Please slow down.');\n      break;\n    case 500:\n      toast.error('Server error. Please try again later.');\n      break;\n    default:\n      if (data !== null && data !== void 0 && data.message) {\n        toast.error(data.message);\n      } else {\n        toast.error(`Error ${status}: Something went wrong.`);\n      }\n  }\n  return Promise.reject(error);\n});\n\n// Enhanced API methods with better error handling\nexport const authAPI = {\n  login: async credentials => {\n    try {\n      console.log('ðŸ” Attempting login...');\n      const response = await api.post('/auth/login', credentials);\n      console.log('âœ… Login successful');\n      return response;\n    } catch (error) {\n      console.error('âŒ Login failed:', error.message);\n      throw error;\n    }\n  },\n  register: async userData => {\n    try {\n      console.log('ðŸ“ Attempting registration...');\n      const response = await api.post('/auth/register', userData);\n      console.log('âœ… Registration successful');\n      return response;\n    } catch (error) {\n      console.error('âŒ Registration failed:', error.message);\n      throw error;\n    }\n  },\n  logout: () => {\n    console.log('ðŸšª Logging out...');\n    return api.post('/auth/logout').catch(() => {\n      // Ignore logout errors since we're clearing session anyway\n      console.log('â„¹ï¸ Logout request failed, but proceeding with client-side logout');\n    });\n  },\n  getProfile: () => api.get('/auth/me'),\n  updateProfile: data => api.put('/auth/profile', data),\n  changePassword: data => api.post('/auth/change-password', data)\n};\nexport const adminAPI = {\n  getDashboard: () => api.get('/admin/dashboard'),\n  getUsers: params => api.get('/admin/users', {\n    params\n  }),\n  createUser: userData => api.post('/admin/users', userData),\n  updateUser: (id, userData) => api.put(`/admin/users/${id}`, userData),\n  deleteUser: id => api.delete(`/admin/users/${id}`),\n  getRequests: params => api.get('/admin/requests', {\n    params\n  }),\n  approveRequest: (id, data) => api.put(`/admin/requests/${id}/approve`, data),\n  rejectRequest: (id, data) => api.put(`/admin/requests/${id}/reject`, data),\n  getReports: params => api.get('/admin/reports/summary', {\n    params\n  })\n};\nexport const officerAPI = {\n  getDashboard: () => api.get('/officer/dashboard'),\n  getRequests: params => api.get('/officer/requests', {\n    params\n  }),\n  createRequest: requestData => api.post('/officer/requests', requestData),\n  cancelRequest: id => api.put(`/officer/requests/${id}/cancel`),\n  getIssuedEquipment: () => api.get('/officer/equipment/issued'),\n  getInventory: params => api.get('/officer/inventory', {\n    params\n  }),\n  getEquipmentDetails: id => api.get(`/officer/equipment/${id}`)\n};\nexport const equipmentAPI = {\n  getEquipment: params => api.get('/equipment', {\n    params\n  }),\n  createEquipment: equipmentData => api.post('/equipment', equipmentData),\n  getEquipmentById: id => api.get(`/equipment/${id}`),\n  updateEquipment: (id, equipmentData) => api.put(`/equipment/${id}`, equipmentData),\n  deleteEquipment: id => api.delete(`/equipment/${id}`),\n  issueEquipment: (id, data) => api.put(`/equipment/${id}/issue`, data),\n  returnEquipment: id => api.put(`/equipment/${id}/return`)\n};\n\n// Health check function\nexport const checkServerHealth = async () => {\n  try {\n    console.log('ðŸ¥ Checking server health...');\n    const response = await axios.get((process.env.REACT_APP_API_URL || 'http://localhost:5000/api') + '/health', {\n      timeout: 5000\n    });\n    console.log('âœ… Server is healthy:', response.data);\n    return {\n      healthy: true,\n      data: response.data\n    };\n  } catch (error) {\n    console.error('âŒ Server health check failed:', error.message);\n    if (error.code === 'ECONNREFUSED' || error.message === 'Network Error') {\n      toast.error('Backend server is not running. Please start the server with \"npm run dev\" in the backend folder.');\n    } else {\n      toast.error('Unable to connect to backend server.');\n    }\n    return {\n      healthy: false,\n      error: error.message\n    };\n  }\n};\n\n// Test connection function\nexport const testConnection = async () => {\n  const health = await checkServerHealth();\n  if (health.healthy) {\n    // Test auth endpoint\n    try {\n      await axios.get((process.env.REACT_APP_API_URL || 'http://localhost:5000/api') + '/auth/me');\n      return {\n        success: true,\n        message: 'Connection successful'\n      };\n    } catch (error) {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        return {\n          success: true,\n          message: 'Connection successful (not authenticated)'\n        };\n      }\n      return {\n        success: false,\n        message: 'Auth endpoint unreachable'\n      };\n    }\n  }\n  return {\n    success: false,\n    message: 'Server unreachable'\n  };\n};\n\n// Utility functions\nexport const handleApiError = (error, defaultMessage = 'An error occurred') => {\n  var _error$response2, _error$response2$data;\n  if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.message) {\n    return error.response.data.message;\n  } else if (error.message) {\n    return error.message;\n  }\n  return defaultMessage;\n};\nexport const formatDate = dateString => {\n  if (!dateString) return 'N/A';\n  return new Date(dateString).toLocaleDateString();\n};\nexport const formatDateTime = dateString => {\n  if (!dateString) return 'N/A';\n  return new Date(dateString).toLocaleString();\n};\nexport const getStatusBadgeClass = status => {\n  const statusClasses = {\n    'Available': 'badge-success',\n    'Issued': 'badge-warning',\n    'Under Maintenance': 'badge-info',\n    'Retired': 'badge-danger',\n    'Pending': 'badge-warning',\n    'Approved': 'badge-success',\n    'Rejected': 'badge-danger',\n    'Completed': 'badge-info',\n    'Cancelled': 'badge-secondary'\n  };\n  return statusClasses[status] || 'badge-secondary';\n};\nexport default api;","map":{"version":3,"names":["axios","toast","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","isRefreshing","interceptors","request","use","config","_config$method","token","localStorage","getItem","Authorization","console","log","method","toUpperCase","url","error","Promise","reject","response","_response$config$meth","status","_originalRequest$meth","originalRequest","message","code","data","_retry","get","success","refreshError","removeItem","defaults","common","window","dispatchEvent","CustomEvent","includes","errors","Array","isArray","forEach","err","msg","authAPI","login","credentials","post","register","userData","logout","catch","getProfile","updateProfile","put","changePassword","adminAPI","getDashboard","getUsers","params","createUser","updateUser","id","deleteUser","delete","getRequests","approveRequest","rejectRequest","getReports","officerAPI","createRequest","requestData","cancelRequest","getIssuedEquipment","getInventory","getEquipmentDetails","equipmentAPI","getEquipment","createEquipment","equipmentData","getEquipmentById","updateEquipment","deleteEquipment","issueEquipment","returnEquipment","checkServerHealth","healthy","testConnection","health","_error$response","handleApiError","defaultMessage","_error$response2","_error$response2$data","formatDate","dateString","Date","toLocaleDateString","formatDateTime","toLocaleString","getStatusBadgeClass","statusClasses"],"sources":["D:/HIMSPv2/police-inventory-system/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\n// Create axios instance with better configuration\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Add response interceptor for better auth error handling\r\nlet isRefreshing = false;\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    // Add auth token to requests if it exists\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n    // Log request for debugging\r\n    console.log(`ðŸ”„ ${config.method?.toUpperCase()} ${config.url}`);\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Request Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor with better error handling\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log(`âœ… ${response.config.method?.toUpperCase()} ${response.config.url} - ${response.status}`);\r\n    return response;\r\n  },\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n\r\n    // Handle network errors first\r\n    if (!error.response) {\r\n      console.error('âŒ Network Error:', error.message);\r\n\r\n      if (error.code === 'ECONNABORTED') {\r\n        toast.error('Request timeout. Please try again.');\r\n      } else if (error.message === 'Network Error') {\r\n        toast.error('Network error. Please check your connection and ensure the backend server is running on port 5000.');\r\n      } else {\r\n        toast.error('Unable to connect to server. Please check if the backend is running.');\r\n      }\r\n\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    const { status, data } = error.response;\r\n    console.error(`âŒ ${originalRequest.method?.toUpperCase()} ${originalRequest.url} - ${status}:`, data?.message || 'Unknown error');\r\n\r\n    // Handle different HTTP status codes\r\n    switch (status) {\r\n      case 401:\r\n        // Unauthorized - handle token expiration\r\n        if (!isRefreshing && !originalRequest._retry) {\r\n          console.log('ðŸ”„ Token expired, attempting to refresh...');\r\n\r\n          // Try to refresh the authentication\r\n          const token = localStorage.getItem('token');\r\n          if (token) {\r\n            originalRequest._retry = true;\r\n\r\n            try {\r\n              // Check if token is still valid by calling /auth/me\r\n              const response = await axios.get(`${process.env.REACT_APP_API_URL || 'http://localhost:5000/api'}/auth/me`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n              });\r\n\r\n              if (response.data.success) {\r\n                console.log('âœ… Token is still valid, retrying request');\r\n                return api(originalRequest);\r\n              }\r\n            } catch (refreshError) {\r\n              console.log('âŒ Token refresh failed');\r\n            }\r\n          }\r\n\r\n          // Token is invalid, clear session and redirect\r\n          console.log('ðŸ§¹ Clearing invalid session');\r\n          localStorage.removeItem('token');\r\n          delete api.defaults.headers.common['Authorization'];\r\n\r\n          // Dispatch custom event for AuthContext to handle\r\n          window.dispatchEvent(new CustomEvent('auth-error'));\r\n\r\n          toast.error('Session expired. Please login again.');\r\n        }\r\n        break;\r\n\r\n      case 403:\r\n        toast.error('Access denied. You do not have permission to perform this action.');\r\n        break;\r\n\r\n      case 404:\r\n        // Don't show toast for 404s on background requests\r\n        if (!originalRequest.url.includes('/dashboard')) {\r\n          toast.error('Resource not found.');\r\n        }\r\n        break;\r\n\r\n      case 422:\r\n        // Validation errors\r\n        if (data.errors && Array.isArray(data.errors)) {\r\n          data.errors.forEach(err => toast.error(err.msg || err.message));\r\n        } else {\r\n          toast.error(data.message || 'Validation error occurred.');\r\n        }\r\n        break;\r\n\r\n      case 429:\r\n        toast.error('Too many requests. Please slow down.');\r\n        break;\r\n\r\n      case 500:\r\n        toast.error('Server error. Please try again later.');\r\n        break;\r\n\r\n      default:\r\n        if (data?.message) {\r\n          toast.error(data.message);\r\n        } else {\r\n          toast.error(`Error ${status}: Something went wrong.`);\r\n        }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Enhanced API methods with better error handling\r\nexport const authAPI = {\r\n  login: async (credentials) => {\r\n    try {\r\n      console.log('ðŸ” Attempting login...');\r\n      const response = await api.post('/auth/login', credentials);\r\n      console.log('âœ… Login successful');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('âŒ Login failed:', error.message);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  register: async (userData) => {\r\n    try {\r\n      console.log('ðŸ“ Attempting registration...');\r\n      const response = await api.post('/auth/register', userData);\r\n      console.log('âœ… Registration successful');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('âŒ Registration failed:', error.message);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  logout: () => {\r\n    console.log('ðŸšª Logging out...');\r\n    return api.post('/auth/logout').catch(() => {\r\n      // Ignore logout errors since we're clearing session anyway\r\n      console.log('â„¹ï¸ Logout request failed, but proceeding with client-side logout');\r\n    });\r\n  },\r\n\r\n  getProfile: () => api.get('/auth/me'),\r\n  updateProfile: (data) => api.put('/auth/profile', data),\r\n  changePassword: (data) => api.post('/auth/change-password', data)\r\n};\r\n\r\nexport const adminAPI = {\r\n  getDashboard: () => api.get('/admin/dashboard'),\r\n  getUsers: (params) => api.get('/admin/users', { params }),\r\n  createUser: (userData) => api.post('/admin/users', userData),\r\n  updateUser: (id, userData) => api.put(`/admin/users/${id}`, userData),\r\n  deleteUser: (id) => api.delete(`/admin/users/${id}`),\r\n  getRequests: (params) => api.get('/admin/requests', { params }),\r\n  approveRequest: (id, data) => api.put(`/admin/requests/${id}/approve`, data),\r\n  rejectRequest: (id, data) => api.put(`/admin/requests/${id}/reject`, data),\r\n  getReports: (params) => api.get('/admin/reports/summary', { params })\r\n};\r\n\r\nexport const officerAPI = {\r\n  getDashboard: () => api.get('/officer/dashboard'),\r\n  getRequests: (params) => api.get('/officer/requests', { params }),\r\n  createRequest: (requestData) => api.post('/officer/requests', requestData),\r\n  cancelRequest: (id) => api.put(`/officer/requests/${id}/cancel`),\r\n  getIssuedEquipment: () => api.get('/officer/equipment/issued'),\r\n  getInventory: (params) => api.get('/officer/inventory', { params }),\r\n  getEquipmentDetails: (id) => api.get(`/officer/equipment/${id}`)\r\n};\r\n\r\nexport const equipmentAPI = {\r\n  getEquipment: (params) => api.get('/equipment', { params }),\r\n  createEquipment: (equipmentData) => api.post('/equipment', equipmentData),\r\n  getEquipmentById: (id) => api.get(`/equipment/${id}`),\r\n  updateEquipment: (id, equipmentData) => api.put(`/equipment/${id}`, equipmentData),\r\n  deleteEquipment: (id) => api.delete(`/equipment/${id}`),\r\n  issueEquipment: (id, data) => api.put(`/equipment/${id}/issue`, data),\r\n  returnEquipment: (id) => api.put(`/equipment/${id}/return`)\r\n};\r\n\r\n// Health check function\r\nexport const checkServerHealth = async () => {\r\n  try {\r\n    console.log('ðŸ¥ Checking server health...');\r\n    const response = await axios.get(\r\n      (process.env.REACT_APP_API_URL || 'http://localhost:5000/api') + '/health',\r\n      { timeout: 5000 }\r\n    );\r\n    console.log('âœ… Server is healthy:', response.data);\r\n    return { healthy: true, data: response.data };\r\n  } catch (error) {\r\n    console.error('âŒ Server health check failed:', error.message);\r\n\r\n    if (error.code === 'ECONNREFUSED' || error.message === 'Network Error') {\r\n      toast.error('Backend server is not running. Please start the server with \"npm run dev\" in the backend folder.');\r\n    } else {\r\n      toast.error('Unable to connect to backend server.');\r\n    }\r\n\r\n    return { healthy: false, error: error.message };\r\n  }\r\n};\r\n\r\n// Test connection function\r\nexport const testConnection = async () => {\r\n  const health = await checkServerHealth();\r\n\r\n  if (health.healthy) {\r\n    // Test auth endpoint\r\n    try {\r\n      await axios.get((process.env.REACT_APP_API_URL || 'http://localhost:5000/api') + '/auth/me');\r\n      return { success: true, message: 'Connection successful' };\r\n    } catch (error) {\r\n      if (error.response?.status === 401) {\r\n        return { success: true, message: 'Connection successful (not authenticated)' };\r\n      }\r\n      return { success: false, message: 'Auth endpoint unreachable' };\r\n    }\r\n  }\r\n\r\n  return { success: false, message: 'Server unreachable' };\r\n};\r\n\r\n// Utility functions\r\nexport const handleApiError = (error, defaultMessage = 'An error occurred') => {\r\n  if (error.response?.data?.message) {\r\n    return error.response.data.message;\r\n  } else if (error.message) {\r\n    return error.message;\r\n  }\r\n  return defaultMessage;\r\n};\r\n\r\nexport const formatDate = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  return new Date(dateString).toLocaleDateString();\r\n};\r\n\r\nexport const formatDateTime = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  return new Date(dateString).toLocaleString();\r\n};\r\n\r\nexport const getStatusBadgeClass = (status) => {\r\n  const statusClasses = {\r\n    'Available': 'badge-success',\r\n    'Issued': 'badge-warning',\r\n    'Under Maintenance': 'badge-info',\r\n    'Retired': 'badge-danger',\r\n    'Pending': 'badge-warning',\r\n    'Approved': 'badge-success',\r\n    'Rejected': 'badge-danger',\r\n    'Completed': 'badge-info',\r\n    'Cancelled': 'badge-secondary'\r\n  };\r\n\r\n  return statusClasses[status] || 'badge-secondary';\r\n};\r\n\r\n\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}